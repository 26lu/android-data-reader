# 设计文档

## 1. 系统架构

### 1.1 整体架构
本系统采用分层架构设计，分为以下几层：
- 表示层(UI Layer)：负责用户界面展示和用户交互
- 业务逻辑层(Business Logic Layer)：处理核心业务逻辑
- 数据访问层(Data Access Layer)：负责与Android设备通信，获取数据
- 工具层(Utilities Layer)：提供通用工具和辅助功能

### 1.2 架构图
```
┌────────────────────────────────────┐
│              UI Layer              │
├────────────────────────────────────┤
│         Business Logic Layer       │
├────────────────────────────────────┤
│          Data Access Layer         │
├────────────────────────────────────┤
│            Utilities Layer         │
└────────────────────────────────────┘
```

## 2. 模块设计

### 2.1 核心模块

#### DeviceManager（设备管理器）
负责设备连接检测、设备信息获取、权限检查等功能。

#### ContactsReader（通讯录读取器）
负责从设备读取联系人信息。

#### SMSReader（短信读取器）
负责从设备读取短信信息。

#### PhotosReader（照片读取器）
负责从设备读取照片和视频信息。

### 2.2 UI模块

#### MainWindow（主窗口）
应用程序主窗口，包含标签页容器和设备状态显示。

#### ContactsTab（通讯录标签页）
显示和管理通讯录数据。

#### SMSTab（短信标签页）
显示和管理短信数据。

#### PhotosTab（照片标签页）
显示和管理照片数据。

## 3. 设计模式

### 3.1 MVC模式
UI与业务逻辑分离，提高代码可维护性。

### 3.2 工厂模式
用于设备管理模块的驱动加载。

### 3.3 观察者模式
用于设备连接状态的监听。

## 4. 数据结构设计

### 4.1 Contact（联系人）
- name: 联系人姓名
- phone_numbers: 电话号码列表
- email_addresses: 邮箱地址列表
- group: 所属分组

### 4.2 SMSMessage（短信）
- id: 短信ID
- address: 发送方/接收方地址
- date: 时间戳
- type: 类型（发送/接收）
- body: 短信内容

### 4.3 Photo（照片）
- id: 照片ID
- name: 照片名称
- path: 设备中路径
- size: 文件大小
- date_taken: 拍摄时间
- thumbnail_path: 缩略图路径